// Last updated: 08.05.2025

var a = require('users/bzgeo/hyperspectral_toolkit:00_pkg/ref_data_pace_oci');
var b = require('users/bzgeo/hyperspectral_toolkit:00_pkg/emit_hyperion_pace');

//var img = a.pace_oci_mt_mes_img;
var img = ee.Image("users/servirbz/x_tmp/hyperspectral/mes_pace_oci_sr_202403_202503");

print(img);

Export.image.toAsset({
  image: img, assetId: 'users/servirbz/x_tmp/hyperspectral/mes_pace_oci_sr_202403_202503',
  description: 'export_ee_1_img', region: img.geometry().bounds(), scale: img.projection().nominalScale(), maxPixels: 1e13});


Export.image.toDrive({'image': img, 'region': img.geometry().bounds(), 'scale': 4000,
        'description': 'export_drv_pace_oci_mes', 'folder': 'x_tmp_gee_outputs',
        'fileNamePrefix': 'mes_pace_oci_sr_202403_202503', 'crs': 'EPSG:4326', 'maxPixels': 1e13});

var pca = b.pca(img);
print(pca);

//b.variance_pca(img);


Export.image.toAsset({
  image: pca, assetId: 'users/servirbz/x_tmp/hyperspectral/mes_pace_oci_sr_202403_202503_pca_01',
  description: 'export_ee_2_pca', region: pca.geometry().bounds(), scale: pca.projection().nominalScale(), maxPixels: 1e13});
