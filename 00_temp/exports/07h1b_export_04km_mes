/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var img1 = ee.Image("projects/bz-sdg/compil_imagery/hyperspectral/pace_oci_sr/mesoamerica_04km/mes_pace_oci_sr_202505a_4km_"),
    img2 = ee.Image("projects/bz-sdg/compil_imagery/hyperspectral/pace_oci_sr/mesoamerica_04km/mes_pace_oci_sr_202505b_4km_"),
    img3 = ee.Image("projects/bz-sdg/compil_imagery/hyperspectral/pace_oci_sr/mesoamerica_04km/mes_pace_oci_sr_202505c_4km_"),
    img4 = ee.Image("projects/bz-sdg/compil_imagery/hyperspectral/pace_oci_sr/mesoamerica_04km/mes_pace_oci_sr_202505d_4km_");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var a = require('users/bzgeo/examples:_ancillary/mes');
var b = require('users/bzgeo/hyperspectral_toolkit:00_pkg/emit_hyperion_pace');
var c = require('users/bzgeo/hyperspectral_toolkit:00_pkg/ref_data_pace_oci');

img1 = img1.updateMask(img1.gte(0));
img2 = img2.updateMask(img2.gte(0));
img3 = img3.updateMask(img3.gte(0));
img4 = img4.updateMask(img4.gte(0));

var roi = ee.Geometry.Polygon([[[-77, 22],[-77, 6],[-93, 6],[-93, 22]]]);

var oci_202505 = ee.ImageCollection.fromImages([img1,img2,img3,img4]).median();

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Map.setCenter(19.28, 12.75, 3);
Map.setOptions('SATELLITE');

Map.addLayer(img1, b.viz3_, "PACE OCI SR - 1", 0);
Map.addLayer(img2, b.viz3_, "PACE OCI SR - 2", 0);
Map.addLayer(img3, b.viz3_, "PACE OCI SR - 3", 0);
Map.addLayer(img4, b.viz3_, "PACE OCI SR - 4", 0);
Map.addLayer(oci_202505,b.viz3_,"PACE OCI SR (May 2025)",1);

Map.addLayer(a.bnds_intl_ln2,{palette: "white"},"Int'l boundaries (white)", 1);
Map.addLayer(a.bnds_intl_ln2,{palette: "black"},"Int'l boundaries (black)", 0);

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Export.image.toAsset({image:oci_202505.clip(roi),description:'export_ee_pace_202505x',
assetId:'projects/bz-sdg/compil_imagery/hyperspectral/pace_oci_sr/mesoamerica_04km/mes_pace_oci_sr_202505x_4km',
scale:4638.312214700219,region: roi, crs: 'EPSG:4326'});

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////